- name: [init, i]
  cmd: npm install
  desc: Install dependencies
  cwd: ./src

- name: [watch, w]
  cmd: node_modules/.bin/webpack -w --config webpack.config.js
  desc: Build files on source code change
  cwd: ./src

- name: [serve, s]
  cmd: node node_modules/webpack-serve/cli.js --config webpack.config.js --port 1337 --open
  desc: Build files on source code change and create a local server
  cwd: ./src

- name: [build, b]
  cmd:
    bash: |
      set -e
      find . -maxdepth 1 -type f -not -name 'CNAME' -not -name '.wtfcmd.yml' -not -name 'LICENSE' -delete
      cd src
      NODE_ENV='production' node node_modules/webpack/bin/webpack.js --config webpack.config.js
      rm -f ../critical.js ../critical.css
    powershell: |
      $ErrorActionPreference = "Stop"
      Remove-Item * -Exclude 'CNAME','.wtfcmd.yml','src','.git','LICENSE'
      cd src
      $Env:NODE_ENV = 'production'
      node node_modules/webpack/bin/webpack.js --config webpack.config.js
      Remove-Item ../critical.js
      Remove-Item ../critical.css
  desc: Build for production
  cwd: .